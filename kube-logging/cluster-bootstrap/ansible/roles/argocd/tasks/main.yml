- name: Create Argocd Namespace
  command: kubectl create namespace argocd
  ignore_errors: true

- name: Deploy Argo CD
  command: kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/v1.1.2/manifests/install.yaml

- name: Install Argo CD CLI
  get_url:
    url: https://github.com/argoproj/argo-cd/releases/download/v1.1.2/argocd-linux-amd64
    dest: /usr/bin/argocd
    mode: '0755'